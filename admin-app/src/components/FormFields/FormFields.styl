@import '../../styles/variables'
@import '../../styles/mixins'

.dvc-field
  wordpress-field()

  .dvc-field-header
    margin-bottom $spacing-md
    
  .dvc-field-label
    font-size $font-size-base
    font-weight 500
    color $admin-dark-gray
    margin-bottom 4px
    
  .dvc-field-description
    margin 0
    color $admin-gray
    font-size $font-size-base
    font-style italic
  
  // Group fields use different spacing
  &.group-field
    wordpress-field-grouped()
  
  // Dependency Status Styling
  &.unsupported
    opacity 0.5
    pointer-events none
  
  // WordPress Components Integration
  .components-base-control,
  .components-toggle-control
    margin-bottom 0
    width 100%
    
    &__label
      font-weight 500
      color $admin-dark-gray
      font-size $font-size-base
      text-transform none
    
    &__help
      color $admin-gray
      font-size $font-size-base
      font-style italic
      margin-top 0


// Toggle Field
.toggle-field
  .components-form-toggle
    width 42px
    height 22px

    &.is-checked
      .components-form-toggle__thumb
        transform translateX(20px)

    .components-form-toggle__input:focus+.components-form-toggle__track
      box-shadow none

    .components-form-toggle__track
      width 42px
      height 22px
      border-radius 11px

    .components-form-toggle__thumb
      width 18px
      height 18px

  .components-toggle-control
    margin-bottom 0

    .components-h-stack
      flex-direction row-reverse  

    .components-toggle-control__help
      margin-left 0


// Color Field
.color-field
  .color-field-layout
    display flex
    align-items flex-start
    justify-content space-between
    gap 16px
    
  .color-field-info
    flex 1
    
    .color-field-label
      display block
      font-weight 600
      color #333
      margin-bottom 4px
      
    .color-field-description
      margin 0
      color #666
      font-size 13px
      font-style italic
      line-height 1.4
      
  .color-field-control
    flex-shrink 0
    
    .color-indicator-wrapper
      cursor pointer
      display inline-block
      padding 4px
      border-radius 50%
      transition all 0.2s ease
      
      &:hover
        background-color #f0f0f0
        transform scale(1.05)
        
      .components-color-indicator
        width 32px
        height 32px
        border-radius 50%
        border 2px solid #ddd
        box-shadow 0 2px 4px rgba(0,0,0,0.1)
        transition all 0.2s ease
        
        &:hover
          border-color #007cba
          box-shadow 0 2px 8px rgba(0,124,186,0.2)


// Color Picker Popover Styles  
.color-field-popover
  z-index 1000000 !important
  
  .color-field-picker
    padding 12px
    background white
    border-radius 6px
    box-shadow 0 8px 24px rgba(0,0,0,0.15)
    min-width 260px
    
    // WordPress ColorPicker component styles
    .components-color-picker
      width 100% !important
      
      .components-color-picker__saturation
        margin-bottom 12px
        
      .components-color-picker__hue
        margin-bottom 12px


// Group Field
.group-field
  border-top 1px solid $admin-border
  margin-bottom 0
  padding 0
  overflow hidden
  background white

  &:first-child
    border-top none
  
  .group-field-header
    padding 16px 20px
    background $admin-light-gray
    border-bottom 1px solid $admin-border
    cursor pointer
    display flex
    align-items center
    justify-content space-between
    transition all 0.2s ease
    
    &:hover
      background #f0f2f5
      
    .group-field-info
      flex 1
      
      .group-field-title
        margin 0 0 4px 0
        font-size $font-size-lg
        font-weight 500
        color $admin-dark-gray
        line-height 1.3
        
      .group-field-description
        margin 0
        font-size $font-size-base
        color $admin-gray
        line-height 1.4
        font-style italic
        
    .group-field-toggle
      flex-shrink 0
      margin-left 16px
      color $admin-gray
      transition transform 0.2s ease
      display flex
      align-items center
      justify-content center
      width 2rem
      height 2rem
      
      svg
        width 1.5rem
        height 1.5rem
      
  .group-field-content
    overflow hidden
    transition height 0.3s ease-in-out
    will-change height
    height 0
    
  .group-field-fields
    padding 20px 0
    
    .dvc-field
      margin-bottom 20px
      
      &:last-child
        margin-bottom 0
        
  // Collapsed State
  &.collapsed
    .group-field-header
      border-bottom none
      
    .group-field-toggle
      transform rotate(0deg)
      
  // Expanded State  
  &.expanded
    .group-field-toggle
      transform rotate(0deg)


// Repeater Field
.repeater-field
  max-height none !important

  .repeater-items
    margin-bottom $spacing-md
  
  .repeater-item
    margin-bottom $spacing-sm
    /* border 1px solid $admin-border */
    border-radius $border-radius
    overflow hidden
    
    &.expanded
      .repeater-item-header
        /* border-bottom 1px solid $admin-border */
        
    &.collapsed
      .repeater-item-header
        border-bottom none
        cursor pointer

  .repeater-item-header
    padding .75rem 1rem !important
    background $admin-light-gray
    cursor pointer
    
    .repeater-item-toggle
      flex 1
    
    .expand-toggle
      padding 0 !important
      background none !important
      border none !important
      box-shadow none !important
      text-align left
      width 100%
      justify-content flex-start
      pointer-events none
      
      &:hover
        background none !important
        
      .expand-icon
        display inline-block
        width 16px
        height 16px
        margin-right 8px
        font-size 12px
        line-height 16px
        text-align center
        color $admin-gray
        transition transform 0.2s ease
        
      .item-label
        color $admin-dark-gray
        font-weight 500
  
  .repeater-item-content
    padding 0 !important

  .repeater-fields
    padding 1.25rem 0
    
    .dvc-field
      margin-bottom 1rem
      padding-bottom 1rem
      border-bottom 1px solid #f0f0f0
      
      &:last-child
        margin-bottom 0
        padding-bottom 0
        border-bottom none

  .repeater-empty
    text-align center
    padding 40px 20px
    background $admin-light-gray
    border 2px dashed $admin-border
    border-radius 4px
    color $admin-gray
    
    p
      margin 0
      font-style italic
      
  .add-repeater-item
    width 100%
    justify-content center
    margin-bottom: .25rem

